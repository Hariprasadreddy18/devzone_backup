{"ts":1485674570857,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"---\r\n- name: Install Java 1.7\r\n  yum: name=java-1.7.0-openjdk state=present\r\n\r\n- name: add group \"tomcat\"\r\n  group: name=tomcat\r\n\r\n- name: add user \"tomcat\"\r\n  user: name=tomcat group=tomcat home=/usr/share/tomcat createhome=no\r\n  become: True\r\n  become_method: sudo\r\n\r\n- name: Download Tomcat\r\n  get_url: url=http://archive.apache.org/dist/tomcat/tomcat-7/v7.0.61/bin/apache-tomcat-7.0.61.tar.gz dest=/opt/apache-tomcat-7.0.61.tar.gz\r\n\r\n- name: Extract archive\r\n  command: chdir=/usr/share /bin/tar xvf /opt/apache-tomcat-7.0.61.tar.gz -C /opt/ creates=/opt/apache-tomcat-7.0.61\r\n\r\n- name: Symlink install directory\r\n  file: src=/opt/apache-tomcat-7.0.61 path=/usr/share/tomcat state=link\r\n\r\n- name: Change ownership of Tomcat installation\r\n  file: path=/usr/share/tomcat/ owner=tomcat group=tomcat state=directory recurse=yes\r\n\r\n- name: Configure Tomcat server\r\n  template: src=server.xml dest=/usr/share/tomcat/conf/\r\n  notify: restart tomcat\r\n\r\n- name: Configure Tomcat users\r\n  template: src=tomcat-users.xml dest=/usr/share/tomcat/conf/\r\n  notify: restart tomcat\r\n\r\n- name: Install Tomcat init script\r\n  copy: src=tomcat-initscript.sh dest=/etc/init.d/tomcat mode=0755\r\n\r\n- name: Start Tomcat\r\n  service: name=tomcat state=started enabled=yes\r\n\r\n- name: deploy iptables rules\r\n  template: src=iptables-save dest=/etc/sysconfig/iptables\r\n  when: \"ansible_os_family == 'RedHat' and ansible_distribution_major_version == '6'\"\r\n  notify: restart iptables\r\n\r\n- name: insert firewalld rule for tomcat http port\r\n  firewalld: port={{ http_port }}/tcp permanent=true state=enabled immediate=yes\r\n  when: \"ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'\"\r\n\r\n- name: insert firewalld rule for tomcat https port\r\n  firewalld: port={{ https_port }}/tcp permanent=true state=enabled immediate=yes\r\n  when: \"ansible_os_family == 'RedHat' and ansible_distribution_major_version == '7'\"\r\n\r\n- name: wait for tomcat to start\r\n  wait_for: port={{http_port}}\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1974}]],"length":1974}
{"contributors":[],"silentsave":false,"ts":1485910585641,"patch":[[{"diffs":[[0,"\r\n  "],[-1,"yum"],[1,"apt"],[0,": na"]],"start1":29,"start2":29,"length1":11,"length2":11}]],"length":1974,"saved":false}
{"ts":1485910610976,"patch":[[{"diffs":[[0,"\r\n  "],[-1,"apt"],[1,"yum"],[0,": na"]],"start1":29,"start2":29,"length1":11,"length2":11}]],"length":1974,"saved":false}
{"ts":1485913463261,"patch":[[{"diffs":[[0,"\r\n  "],[-1,"yum"],[1,"apt"],[0,": na"]],"start1":29,"start2":29,"length1":11,"length2":11}]],"length":1974,"saved":false}
{"ts":1485913743852,"patch":[[{"diffs":[[0,"\n  apt: "],[1,"\r\n      "],[0,"name=jav"]],"start1":30,"start2":30,"length1":16,"length2":24}]],"length":1982,"saved":false}
{"ts":1485913807736,"patch":[[{"diffs":[[0,": \r\n    "],[-1,"  "],[0,"name=jav"]],"start1":36,"start2":36,"length1":18,"length2":16}]],"length":1980,"saved":false}
