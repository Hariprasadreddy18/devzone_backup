{"ts":1485753815464,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"---\r\n- name: Install Java 1.7 and some basic dependencies\r\n  yum: name={{item}} state=present\r\n  with_items:\r\n   - unzip\r\n   - java-1.7.0-openjdk\r\n   - libselinux-python\r\n   - libsemanage-python\r\n\r\n- name: Download JBoss from jboss.org\r\n  get_url: url=http://download.jboss.org/jbossas/7.1/jboss-as-7.1.1.Final/jboss-as-7.1.1.Final.zip dest=/opt/jboss-as-7.1.1.Final.zip\r\n\r\n- name: Extract archive\r\n  unarchive: dest=/usr/share src=/opt/jboss-as-7.1.1.Final.zip creates=/usr/share/jboss-as copy=no \r\n\r\n  # Rename the dir to avoid encoding the version in the init script\r\n- name: Rename install directory\r\n  command: chdir=/usr/share /bin/mv jboss-as-7.1.1.Final jboss-as creates=/usr/share/jboss-as\r\n\r\n- name: Copying standalone.xml configuration file\r\n  template: src=standalone.xml dest=/usr/share/jboss-as/standalone/configuration/\r\n  notify: restart jboss\r\n\r\n- name: Add group \"jboss\"\r\n  group: name=jboss\r\n\r\n- name: Add user \"jboss\"\r\n  user: name=jboss group=jboss home=/usr/share/jboss-as\r\n\r\n- name: Change ownership of JBoss installation\r\n  file: path=/usr/share/jboss-as/ owner=jboss group=jboss state=directory recurse=yes\r\n\r\n- name: Copy the init script\r\n  copy: src=jboss-as-standalone.sh dest=/etc/init.d/jboss mode=0755\r\n\r\n- name: Workaround for systemd bug\r\n  shell: service jboss start && chkconfig jboss on\r\n\r\n- name: Enable JBoss to be started at boot\r\n  service: name=jboss enabled=yes state=started\r\n\r\n- name: deploy iptables rules\r\n  template: src=iptables-save dest=/etc/sysconfig/iptables\r\n  when: ansible_distribution_major_version != \"7\" \r\n  notify: restart iptables\r\n\r\n- name: Ensure that firewalld is installed\r\n  yum: name=firewalld state=present\r\n  when: ansible_distribution_major_version == \"7\" \r\n\r\n- name: Ensure that firewalld is started\r\n  service: name=firewalld state=started\r\n  when: ansible_distribution_major_version == \"7\" \r\n\r\n- name: deploy firewalld rules\r\n  firewalld: immediate=yes port={{ item }} state=enabled permanent=yes\r\n  when: ansible_distribution_major_version == \"7\"\r\n  with_items:\r\n  - \"{{ http_port }}/tcp\"\r\n  - \"{{ https_port }}/tcp\"\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":2093}]],"length":2093}
