{"ts":1485824461299,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"---\n# Installing Packages\n- name: Install Tomcat7 (Ubuntu)\n  apt: pkg={{ item }} state=latest\n  with_items:\n    - tomcat7\n    - libtcnative-1\n    - libapr1\n  when: ansible_distribution == 'Ubuntu'\n\n- name: Install Tomcat7 (Debian)\n  apt: pkg={{ item }} state=latest\n  with_items:\n    - tomcat7\n  when: ansible_distribution == 'Debian'\n\n- name: Install Tomcat7 (Amazon Linux)\n  yum: pkg={{ item }} state=latest\n  with_items:\n    - tomcat7\n    - tomcat-native\n  when: ansible_distribution == 'Amazon'\n\n# Creating Tomcat Symlinks\n- name: Symlink to /usr/local/tomcat\n  file: dest=/usr/local/tomcat state=link src=/var/lib/tomcat7\n  when: ansible_distribution == 'Ubuntu' or ansible_distribution == 'Debian'\n\n- name: Symlink to /usr/local/tomcat\n  file: dest=/usr/local/tomcat state=link src=/usr/share/tomcat7\n  when: ansible_distribution == 'Amazon'\n\n# Setting Deploy Directory File Permissions\n- name: Set Tomcat Deployment Directory Permissions\n  file: dest=/usr/local/tomcat/webapps state=directory owner={{ tomcat_user }}  group={{ tomcat_user }}  mode=0775\n  when: ansible_distribution == 'Ubuntu' or ansible_distribution == 'Debian'\n\n# Creating Service Configuration\n- name: Configuring Tomcat Service (Ubuntu / Debian)\n  template: src=tomcat7.j2 dest=/etc/default/tomcat7 owner=root group=root mode=0644\n  notify: restart_tomcat\n  when: ansible_distribution == 'Ubuntu' or ansible_distribution == 'Debian'\n\n- name: Configuring Tomcat Service (Amazon)\n  template: src=tomcat7.conf.j2 dest=/etc/tomcat7/tomcat7.conf owner={{ tomcat_user }}  group={{ tomcat_user }}  mode=644\n  notify: restart_tomcat\n  when: ansible_distribution == 'Amazon'\n\n- name: Enable Tomcat Service\n  service: name=tomcat7 enabled=yes"]],"start1":0,"start2":0,"length1":0,"length2":1710}]],"length":1710}
