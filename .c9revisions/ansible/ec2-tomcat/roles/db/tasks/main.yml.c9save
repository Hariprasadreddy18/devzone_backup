{"ts":1486419534415,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"---\n# This playbook will install MariaDB and create db user and give permissions.\n\n- name: Install MariaDB package\n  yum: name={{ item }} state=installed\n  with_items:\n   - mariadb-server\n   - MySQL-python\n\n- name: Configure SELinux to start mysql on any port\n  seboolean: name=mysql_connect_any state=true persistent=yes\n\n- name: Create Mysql configuration file\n  template: src=my.cnf.j2 dest=/etc/my.cnf\n  notify:\n  - restart mariadb\n\n- name: Create MariaDB log file\n  file: path=/var/log/mysqld.log state=touch owner=mysql group=mysql mode=0775\n\n- name: Create MariaDB PID directory\n  file: path=/var/run/mysqld state=directory owner=mysql group=mysql mode=0775\n\n- name: Start MariaDB Service\n  service: name=mariadb state=started enabled=yes\n\n- name: Start firewalld\n  service: name=firewalld state=started enabled=yes\n\n- name: insert firewalld rule\n  firewalld: port={{ mysql_port }}/tcp permanent=true state=enabled immediate=yes\n\n- name: Create Application Database\n  mysql_db: name={{ dbname }} state=present\n\n- name: Create Application DB User\n  mysql_user: name={{ dbuser }} password={{ upassword }} priv=*.*:ALL host='%' state=present\n"]],"start1":0,"start2":0,"length1":0,"length2":1146}]],"length":1146}
